{"version":3,"sources":["gameScene.js"],"names":["cc","Class","extends","Component","properties","itemTest","type","Prefab","default","itemContent","Node","start","countDownLeftTime","initStart_Y","y","prefabItemCachePool","itemHeight","data","_contentSize","height","initData","initPrefabItemCachePool","loadData","start_index","node","getChildByName","on","on_scroll_ended","bind","beginCountDown","console","log","length","i","friendItemPrefab","label","getComponent","Label","inviteLab","physicalLocation","active","itemTemp","isClicked","string","time","value_set","upDateLableString","item","self","schedule","index","tempItem","scrollveiw_load_recode","elastic","page_num","start_y","_autoScrolling","down_loaded","out_len","up_loaded","showClick","hiddeClick","countDownCallBack","randomLength","Math","floor","random","push","temp","name","tempArr","nameArr","indexOf","slice","lastTempData","clearOffLinePlayerItem","prefabItem","instantiate","parent","EventType","TOUCH_END","touchEvent","update","dt"],"mappings":"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","file":"gameScene.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        itemTest:{\n            type:cc.Prefab,\n            default:null,\n        },\n\n        itemContent:{\n            type:cc.Node,\n            default:null,\n        },\n\n    },\n\n    start () {\n\t\t//记录定时剩余时间的大数组\n\t\tthis.countDownLeftTime = [];\n\n\t\t//列表content的初始y的位置 一加载进来先保存下初始位置\n\t\tthis.initStart_Y = this.itemContent.y;\n\n\t\t//所有预制体的存放池\n\t\tthis.prefabItemCachePool = [];\n\t\t\n\t\t//每个预制体的高度\n\t\tthis.itemHeight = this.itemTest.data._contentSize.height\n\n\t\t//初始化数据\n\t\tthis.initData();\n\t\tthis.initPrefabItemCachePool();\n\t\tthis.loadData(this.start_index);\n\t\tthis.node.getChildByName(\"testScroll\").on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\n\t\tthis.beginCountDown();\n    },\n\n    //请求数据\n    loadData(start_index){\n\t\tthis.start_index = start_index;\n\t\tconsole.log(\"loadData,start_index==\",start_index);\n\t\tconsole.log(\"this.countDownLeftTime.length==\",this.countDownLeftTime.length);\n        for(var i = 0; i < this.prefabItemCachePool.length; i ++) {\n\t\t\tvar friendItemPrefab = this.prefabItemCachePool[i];\n\t\t\tvar label = friendItemPrefab.getChildByName(\"name\").getComponent(cc.Label);\n\t\t\tvar inviteLab = friendItemPrefab.getChildByName(\"invitebtn\").getChildByName(\"invite\").getComponent(cc.Label);\n\t\t\tfriendItemPrefab.physicalLocation = start_index+i;\n\t\t\tconsole.log(\"loadData,start_index+i==\",start_index+i);\n\t\t\tif(start_index + i >= this.countDownLeftTime.length){\n\t\t\t\tconsole.log(\"i===\",i);\n\t\t\t\tfriendItemPrefab.active = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfriendItemPrefab.active = true;\n\t\t\tvar itemTemp = this.countDownLeftTime[start_index+i];\n\t\t\tconsole.log(\"target==\",friendItemPrefab);\n\t\t\t//赋值\n\t\t\tif(itemTemp.isClicked){\n\t\t\t\tinviteLab.string = itemTemp.time;\n\t\t\t}else{\n\t\t\t\tinviteLab.string = \"邀请\";\n\t\t\t}\n\t\t\tlabel.string = this.value_set[start_index+i];\n\t\t\t\n        }\n\t},\n\n\tupDateLableString(item){\n\t\tvar self = this;\n\t\tthis.schedule(function(){\n\t\t\tvar index = item.physicalLocation;\n\t\t\tconsole.log(\"physicalLocation==\",index);\n\t\t\tvar tempItem = self.countDownLeftTime[index];\n\t\t\tif(tempItem.isClicked){\n\t\t\t\titem.getChildByName(\"invitebtn\").getChildByName(\"invite\").getComponent(cc.Label).string = tempItem.time;\n\t\t\t}else{\n\t\t\t\titem.getChildByName(\"invitebtn\").getChildByName(\"invite\").getComponent(cc.Label).string = \"邀请\";\n\t\t\t\ttempItem.isClicked = false;\n\t\t\t\ttempItem.time = 120;\n\t\t\t}\n\t\t},1);\n\t},\n\n\ton_scroll_ended(){\n\t\tthis.scrollveiw_load_recode();\n\t\tthis.node.getChildByName(\"testScroll\").elastic = true;\n\t\n\t},\n\n\tscrollveiw_load_recode(){\n\t\t//因为只拿了一个item复用，所以滑动的范围只要大于1就要重新加载\n\t\tif(this.start_index + this.page_num < this.value_set.length&&this.itemContent.y - this.start_y >= this.itemHeight){\n\t\t\t//如果滑动的范围大于了1个item的高度，就要去加载新的数据\n\t\t\t//每次加载一个数据\n\n\t\t\tif(this.node.getChildByName(\"testScroll\")._autoScrolling){\n\t\t\t\tthis.node.getChildByName(\"testScroll\").elastic = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar down_loaded = 1;\n\t\t\tthis.start_index += down_loaded;\n\n\t\t\t//如果往后再加载一个数据就超过了总的数据长度\n\t\t\tconsole.log(\"start_index==\",this.start_index);\n\t\t\tconsole.log(\"this.value_set.length==\",this.value_set.length);\n\t\t\tif(this.start_index + this.page_num > this.value_set.length){\n\t\t\t\t//down_loaded要剪掉超过的项\n\t\t\t\tvar out_len = (this.start_index + this.page_num) - this.value_set.length; //超过的长度\n\t\t\t\tdown_loaded -= out_len;\n\t\t\t\tthis.start_index -= out_len;\n\t\t\t\tconsole.log(\"out out out out !!\");\n\t\t\t}\n\t\t\tthis.loadData(this.start_index);\n\t\t\tthis.itemContent.y -= down_loaded*this.itemHeight;\n\t\t\treturn;\n\t\t}\n\n\t\t//向上加载\n\t\tif(this.start_index > 0&& this.start_y - this.itemContent.y >= 0){\n\t\t\tif(this.node.getChildByName(\"testScroll\")._autoScrolling){\n\t\t\t\tthis.node.getChildByName(\"testScroll\").elastic = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar up_loaded = 1;\n\t\t\tthis.start_index -= up_loaded;\n\t\t\tif(this.start.index < 0){\n\t\t\t\tup_loaded += this.start_index;\n\t\t\t\tthis.start_index = 0;\n\t\t\t\tconsole.log(\"我总觉着这个地方不会走！！\");\n\t\t\t}\n\n\t\t\tthis.loadData(this.start_index);\n\t\t\tthis.itemContent.y += up_loaded*this.itemHeight;\n\t\t}\n\t},\n\n    showClick(){\n\t\tthis.node.getChildByName(\"testScroll\").active = true;\n\t\t//重新获取数据\n\t\tthis.initData();\n\t\tthis.loadData(0);\n    },\n\n    hiddeClick(){\n\t\tthis.node.getChildByName(\"testScroll\").active = false;\n    },\n\n\t//一个定时器\n    beginCountDown(){\n\t\tthis.countDownCallBack = function(){\n\t\t\tfor(var i = 0; i < this.countDownLeftTime.length;i++){\n\t\t\t\tvar tempItem = this.countDownLeftTime[i];\n\t\t\t\tif(tempItem.isClicked){\n\t\t\t\t\ttempItem.time--;\n\t\t\t\t\tif(tempItem.time === 0){\n\t\t\t\t\t\ttempItem.time = 120;\n\t\t\t\t\t\ttempItem.isClicked = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tthis.schedule(this.countDownCallBack,1);\n\t\t\n\t},\n\t\n\t// onLoad(){\n\t\n\t// },\n\n\tinitData(){\n\t\t//这里是刷新列表的时候重新赋值的地方\n\t\t//content的y的位置\n\t\tthis.start_y = this.initStart_Y;\n\n\t\tthis.itemContent.y = this.initStart_Y;\n\n\t\t//数据的索引\n\t\tthis.start_index = 0;\n\n\t\t//模拟获取到的数据的长度，这里随机\n\t\tthis.randomLength = Math.floor(Math.random()*20);\n\n\t\t//请求下来的数据数组\n\t\tthis.value_set = [];\n\t\t\n\t\t//先装载数据\n        for(var i = 0; i < this.randomLength; i ++) {\n\t\t\tthis.value_set.push(i);\n\t\t}\n\n\t\t//判断下this.countDownLeftTime数组有没有东西，没有数据那么要初始化一下\n\t\tif(!this.countDownLeftTime.length){\n\t\t\tthis.countDownLeftTime = [];\n\t\t\tfor(var i = 0; i < this.randomLength;i++){\n\t\t\t\tvar temp ={\n\t\t\t\t\tname:i,\n\t\t\t\t\ttime:120,\n\t\t\t\t\tisClicked:false,\n\t\t\t\t}\n\t\t\t\tthis.countDownLeftTime.push(temp);\t\n\t\t\t}\n\t\t}else{\n\t\t\t//比较处理数据差异\n\t\t\tvar tempArr = [];\n\t\t\t\n\t\t\tvar nameArr = []; //存储上一次的数据的名字集合\n\t\t\tfor(var i = 0; i < this.countDownLeftTime.length;i++){\n\t\t\t\tvar item = this.countDownLeftTime[i];\n\t\t\t\tnameArr.push(item.name);\n\t\t\t}\n\n\t\t\t//最新的数据\n\t\t\tfor(var i = 0; i < this.randomLength;i++){\n\t\t\t\tvar index = nameArr.indexOf(i);\n\t\t\t\tif(index>=0){\n\t\t\t\t\t//所以temparr里面存的不是名字，是整个对象\n\t\t\t\t\tvar item = this.countDownLeftTime[index];\n\t\t\t\t\ttempArr.push(item);\n\t\t\t\t}\n\t\t\t\t//如果是乱序  那么要用原来的数组 减掉  最新的数据  得到废弃的数据，再去进行删除\n\t\t\t}\n\n\t\t\tconsole.log(\"tempArr==\",tempArr);\n\t\t\t//因为当前拿到的数据是顺序的，所以上面那个操作做完之后 tempArr里面就是存的当前最新的数据 要修改下还\n\t\t\tthis.countDownLeftTime = tempArr.slice(0);\n\t\t\t\n\n\t\t\tfor(var i = 0; i < this.randomLength;i++){\n\t\t\t\tvar lastTempData = this.countDownLeftTime[i];\n\t\t\t\tconsole.log(\"lastTempData ==\",lastTempData);\n\t\t\t\tif(i < this.countDownLeftTime.length&&lastTempData.name === i){\n\t\t\t\t\tcontinue;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(\"这么写这里应该永远不会走！！！！！\");\n\t\t\t\t\tvar temp ={\n\t\t\t\t\t\tname:i,\n\t\t\t\t\t\ttime:120,\n\t\t\t\t\t\tisClicked:false,\n\t\t\t\t\t}\n\t\t\t\t\tthis.countDownLeftTime.push(temp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t},\n    \n\tclearOffLinePlayerItem:function(data){\n\t\t\n\t},\n\n\tinitPrefabItemCachePool:function(){\n\t\t//计算并且初始化需要的最多的预制体个数\n\t\tvar self = this;\n\t\tthis.page_num = Math.floor(this.itemContent._contentSize.height/this.itemHeight)+1; \n\t\tfor(let i = 0; i < this.page_num;i++){\n\t\t\tlet prefabItem = cc.instantiate(this.itemTest);\n\t\t\tprefabItem.parent = this.itemContent;\n\t\t\tprefabItem.getChildByName(\"invitebtn\").on(cc.Node.EventType.TOUCH_END, function(touchEvent){\n\t\t\t\tlet index = prefabItem.physicalLocation;\n\t\t\t\tlet tempItem = self.countDownLeftTime[index];\n\t\t\t\ttempItem.isClicked = true;\n\t\t\t\tself.upDateLableString(prefabItem);\n\t\t\t\tconsole.log(\"prefabItem is clicked!\");\n\t\t\t\t\n\t\t\t}, prefabItem.getChildByName(\"invitebtn\"));\n\t\t\tthis.prefabItemCachePool.push(prefabItem);\t\n        }\n        console.log(\"prefabItemCachePool length==\",this.prefabItemCachePool.length);\n    },\n\n    update (dt) {\n\t\tthis.scrollveiw_load_recode();\n\t},\n});\n"]}